{% extends 'base.html.twig' %}

{% block title %}Notes
{% endblock %}

{% block body %}
<style>
											.page,.current,.previous,.first,.next,.last{
    border: solid 1px;
    padding: 5px;
    margin: 2px;
}
</style>
	{{ block("MenuTop", "Menus/MenuTop.html.twig") }}
	<div class="app-main">
		{{ block("MenuLeft", "Menus/MenuLeft.html.twig") }}


		<div class="app-main__outer">
			<div class="app-main__inner">
				<div class="app-page-title">
					<div class="page-title-wrapper">
						<div class="page-title-heading">
							<div class="page-title-icon">
								<i class="pe-7s-check icon-gradient bg-strong-bliss"></i>
							</div>
							<div>Notes
								<div class="page-title-subheading">Notes des apprenants</div>
							</div>
						</div>
						<div class="page-title-actions">

							<div class="d-inline-block dropdown">
								<a href="{{ path('app_notes_new') }}">
									<button class="btn-shadow btn btn-primary">
										<span class="btn-icon-wrapper pr-2 opacity-7">
											<i class="fa fa-plus fa-w-20"></i>
										</span>
										Ajouter une note
									</button>
								</a>
							</div>
						</div>
					</div>
				</div>

				<div class="tabs-animation">
					<div class="main-card mb-3 card">
						<div class="card-body">

						
								{{ form_start(form2) }}
							<div class="row">
								<div class="col-md-12" style="padding-bottom: 5px;">
									<b>Recherche</b>
								</div>
							</div>
							<div class="row">
								{{ form_start(form2) }}

								<div class="col-md-3">
									{{ form_row(form2.search,{'attr': {'class': 'form-control'}}) }}
									{{ form_errors(form2.search) }}
								</div>

								<div class="col-md-3">
									{{ form_row(form2.classe,{'attr': {'class': 'form-control'}}) }}
									{{ form_errors(form2.classe) }}
								</div>
						
								<button type="submit" class="btn-shadow btn btn-primary" style="    width: 116px;">
									<span class="btn-icon-wrapper pr-2 opacity-7">
										<i class="fa fa-search fa-w-20"></i>
									</span>
									Rechercher
								</button>
</div>
								{{ form_end(form2) }}
							<div id="example_wrapper" class="dataTables_wrapper dt-bootstrap4">

								<div class="row">
									<div class="col-sm-12">
										<table style="width: 100%;" id="example" class="table table-hover table-striped table-bordered dataTable dtr-inline" role="grid" aria-describedby="example_info">
											<thead>
												<tr role="row">
													<th>Classe</th>
													<th>Apprenant</th>
													<th>Type</th>
													<th>Module</th>
													<th>Note1</th>
													<th>Note2</th>
													<th>Note3</th>
													<th>Copies</th>
													<th>actions</th>

												</tr>
											</thead>
											<tbody>

												{% for note in tableNotes %}
													<tr>
														<td>
														{% for classe in note.notes %}
														{{classe.classes.nom}} 
															{% endfor %}
														</td>
														<td>
																{% for etudiant in note.etudiant %}
														{{etudiant.nom}} {{etudiant.prenom}}
															{% endfor %}
														</td>
														
														<td>		{% for note in note.notes %}
														{{note.type}} 
															{% endfor %}</td>
																<td>
														{% for classe in note.notes %}
														{{classe.module.nom}} 
															{% endfor %}
														</td>
														<td>{% if note.note1 %}{{note.note1}}/20 {% else %} {% endif %}</td>
														<td>{% if note.note2 %}{{note.note2}}/20 {% else %} {% endif %}</td>
														<td>{% if note.note3 %}{{note.note3}}/20 {% else %} {% endif %}</td>
														<td>
																		{% for copie in note.copie %}
																		<a target="_blank" href="{{asset('uploads/')}}{{copie.name}}">Copie - {{copie|length}} </a><br>
														 
															{% endfor %}
														</td>
														<td>
															<a href="{{ path('app_tableau_notes_edit', {'id': note.id}) }}">Modifier</a>
														</td>
													</tr>
												{% else %}
													<tr role="row" class="odd">
														<td class="sorting_1 dtr-control" colspan="6">Aucun resultat</td>
													</tr>
												{% endfor %}

											</tbody>

										</table>
																					<nav class="" aria-label="Page navigation example" style="float:right;">
											{{ knp_pagination_render(tableNotes) }}
										</nav>
									</div>
								</div>


							</div>
						</div>
					</div>


				</div>
			</div>

		</div>
	</div>
	{{ block("Footer", "Menus/Footer.html.twig") }}
{% endblock %}
