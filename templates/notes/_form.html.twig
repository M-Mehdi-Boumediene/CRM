{{ form_start(form) }}
<style>
.tableau{
	display: inline-block;
	max-width: 24%;
	padding:5px;
}
</style>
<div class="row">
	<div class="col-md-3">
		{{ form_label(form.classes, 'Classe') }}
		{{ form_row(form.classes,{'attr': {'class': 'form-control select'}}) }}
		{{ form_errors(form.classes) }}
	</div>
	<div class="col-md-3">
		{{ form_label(form.type, 'Type') }}
		{{ form_row(form.type,{'attr': {'class': 'form-control select'}}) }}
		{{ form_errors(form.type) }}
	</div>
	<div class="col-md-3">
		{{ form_label(form.blocid, 'Bloc') }}
		{{ form_row(form.blocid,{'attr': {'class': 'form-control select'}}) }}
		{{ form_errors(form.blocid) }}
	</div>
	<div class="col-md-3">
		{{ form_label(form.moduleid, 'Module') }}
		{{ form_row(form.moduleid,{'attr': {'class': 'form-control select'}}) }}
		{{ form_errors(form.moduleid) }}
	</div>
</div>
<br>

	{% macro tagCollectionItem(tableau) %}
						<div class="row">
				<div class="col-md-3">Apprenant</div>
					<div class="col-md-3">Note /20</div>
					<div class="col-md-3">Observation</div>
					<div class="col-md-3">Pi√®ce jointe</div>
						<div class="col-md-3">
					
				{{ form_row(tableau.etudiant,{'attr': {'class': 'form-control etudiant'}}) }}
				{{ form_errors(tableau.etudiant) }}
						</div>

					<div class="col-md-3">
						
				{{ form_row(tableau.note1,{'attr': {'class': 'form-control '}}) }}
				{{ form_errors(tableau.note1) }}
				
						</div>
						
					<div class="col-md-3">
						
				{{ form_row(tableau.observation1,{'attr': {'class': 'form-control '}}) }}
				{{ form_errors(tableau.observation1) }}
								
				
						</div>
			<div class="col-md-3">
						
				{{ form_row(tableau.copie,{'attr': {'class': 'form-control '}}) }}
				{{ form_errors(tableau.copie) }}
								
				
						</div>
									
		
			</div>
		
			
		
	{% endmacro %}
	
			
	<div class="tags" style="width:100%; " data-index="{{ form.tableau|length > 0 ? form.tableau|last.vars.name + 1 : 0 }}" data-prototype="{{ _self.tagCollectionItem(form.tableau.vars.prototype)|e('html_attr') }}">

	
							
		{% for tableau in form.tableau %}

	{{ _self.tagCollectionItem(tableau) }}

		{% endfor %}

	
			
		
	</div>
	


<br>


<button class="btn">{{ button_label|default('Save') }}</button>
{{ form_end(form) }}
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script>
const addTagLink = document.createElement('a')
addTagLink.classList.add('add_tag_list')
addTagLink.href='#'
addTagLink.innerText='Add a tag'
addTagLink.dataset.collectionHolderClass='tags'

const newLinkLi = document.createElement('div').append(addTagLink)

const collectionHolder = document.querySelector('div.tags')
collectionHolder.appendChild(addTagLink)

const addFormToCollection = (e) => {
	const collectionHolder = document.querySelector('.' + e.currentTarget.dataset.collectionHolderClass);

      const item = document.createElement('div');
		
      item.innerHTML = collectionHolder
        .dataset
        .prototype
        .replace(
          /__name__/g,
          collectionHolder.dataset.index
        );

      collectionHolder.appendChild(item);

      collectionHolder.dataset.index++;
	  collectionHolder.appendChild(addTagLink)
}

addTagLink.addEventListener("click", addFormToCollection)
</script>

{% for etudiant in etudiants %}


<input class="etudiantsListe" type="text" value="{{etudiant.id}}" style="display:none;">


{% endfor %}

<script>
$( ".etudiantsListe" ).each(function(index) {

  addTagLink.click();


});


var counter = 1;
$('.etudiant').each(function () {
		$(this).val(counter)

  
    counter++;
});




</script>

